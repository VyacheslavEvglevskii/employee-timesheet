# Исправление файла .env

## Ваш текущий формат выглядит правильно!

Ваш `GOOGLE_PRIVATE_KEY` уже содержит `\n` и обёрнут в кавычки - это правильно!

## Проверка

Запустите тестовый скрипт:
```bash
node test-key.js
```

Этот скрипт проверит:
- ✓ Правильно ли парсится ключ из .env
- ✓ Правильно ли обрабатывается формат
- ✓ Сможет ли Google API создать auth объект

## Возможные проблемы

### 1. Кодировка файла
Убедитесь, что `.env` файл сохранён в кодировке **UTF-8** (без BOM).

### 2. Реальные переносы строк вместо \n
Если в файле есть реальные переносы строк (когда ключ разбит на несколько строк), это может вызвать проблемы.

**Неправильно (многострочный формат):**
```env
GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDqmh0MSXcYtiMv...
-----END PRIVATE KEY-----"
```

**Правильно (одна строка с \n):**
```env
GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDqmh0MSXcYtiMv...\n-----END PRIVATE KEY-----\n"
```

### 3. Проверка через test-key.js

После запуска `node test-key.js` вы увидите:
- Если видите "✓ Auth объект создан успешно!" - всё работает!
- Если видите "DECODER routines::unsupported" - проблема с форматом ключа

## Решение

Если тест показывает ошибку:

1. **Откройте JSON файл сервисного аккаунта**
2. **Скопируйте значение поля `"private_key"` полностью** (оно уже в правильном формате)
3. **Вставьте в .env**, обернув в кавычки:
   ```env
   GOOGLE_PRIVATE_KEY="[скопированное значение из JSON]"
   ```
4. **Сохраните файл в UTF-8**
5. **Перезапустите сервер**: `npm start`

## Альтернативный способ

Если проблемы продолжаются, попробуйте использовать путь к JSON файлу вместо переменной окружения (но это менее безопасно для продакшена).

